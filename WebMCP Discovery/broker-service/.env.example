# ===========================================
# WebMCP Broker Service - Environment Variables
# ===========================================
# Copy this file to .env and fill in values.

# --- Core ---
PORT=3000
MAX_BROWSERS=5

# --- Authentication ---
# Mode: "apikey" | "managed-identity" | "both"
AUTH_MODE=apikey
# API key for X-API-Key header auth
API_KEY=
# JSON mapping of keys to roles: {"key1":"admin","key2":"viewer"}
API_KEYS={}
# Azure AD / Entra ID (for managed-identity or both mode)
AZURE_TENANT_ID=
AZURE_CLIENT_ID=

# --- RBAC ---
# Set to "true" to enable role-based access control
RBAC_ENABLED=false

# --- URL Allowlisting (SSRF protection) ---
# Comma-separated domain allowlist (empty = allow all public domains)
ALLOWED_DOMAINS=
# Comma-separated domain blocklist
BLOCKED_DOMAINS=
# Block browser sub-resource requests to non-allowed domains
NETWORK_EGRESS_CONTROL=true

# --- Audit Logging ---
# Level: "none" | "basic" | "detailed" | "full"
AUDIT_LOG_LEVEL=basic
# Azure Monitor endpoint for log ingestion (optional)
AZURE_MONITOR_ENDPOINT=

# --- Session Recording ---
# Set to "true" to record all tool executions per session
SESSION_RECORDING=false

# --- Data Redaction ---
# Comma-separated field names to mask in results
REDACTION_FIELDS=password,ssn,credit_card,api_key,secret,token,authorization
# Additional comma-separated regex patterns to redact
REDACTION_PATTERNS=
